---
id: testing-backend-structure
title: Структура файлов
---

# Структура файлов

## Файл TestCase.php

Расположен в `tests/TestCase.php`

Это родительский класс для всех новых тестов.

В нем определяется дополнительная логика и реализуется ряд вспомогательных методов.

При необходимости именно в нем можно дописывать недостающие хелперы и переиспользуемые от теста к тесту подходы. Пример - метод `paginationAssertions`.

## Названия тестов

### Директории

Базовая директория расположения тестов - `tests`. Далее мы создаем директории по сущностям. Например - `BrowserProfile`, `Proxy`, `Bookmark` и т.д.

### Файлы

Относиться к названию файла и класса теста следует внимательно. Потому что на дистанции - это экономия времени для диагностики упавших тестов + дань уважение к разработчикам, которые будут работать с тобой над этими файлами.

Общий принцип такой - **чем короче файл теста, тем лучше**.

Возьмем в пример задачу протестировать:

- Получение списка прокси
- Создание прокси с двумя разными типами - `http` и `socks5`

Есть три варианта, которые могут придти в голову (на самом деле больше):

1. Создать файл `tests/Proxy/ProxyTest.php`
2. Создать файлы `tests/Proxy/ProxyListTest.php` и `tests/Proxy/ProxyCreationTest.php`
3. Создать файлы `tests/Proxy/ProxyListTest.php`, `tests/Proxy/ProxyCreationHttpTest.php` и `tests/Proxy/ProxyCreationSocks5Test.php`

Совершенно очевидно, что именно третий вариант будет лучше других следовать принципу о длине файла.

## Создание тестов

Новый тест создается командой 

```bash
php artisan make:test ProxyTest
```

Если необходимо расположить файл в директории, то следует дописать ее

```bash
php artisan make:test Proxy/ProxyTest
```

## Резервированные слова

- Файл теста обязательно должен заканчиваться на Test. В ином случае он не будет распознан phpunit как файл, подлежащий к запуску
  - Правильно - `ProxyTest`
  - Неправильно - `ProxyTestClass`
- Из предыдущего пункта вытекает лайфхак. Если ты пока не завершил работу над тестом, но хочешь уже хранить его в кодовой базе, просто добавь к нему, например, суффикс `Draft`. Так, чтобы получилось `ProxyTestDraft`
- Методы класса, которые реализовывают тесты, должны содержать в себе слово `test` в любом месте названия
  - Правильно - `test01()`
  - Правильно - `infotestfinal()`
  - Неправльно - `check_list()`